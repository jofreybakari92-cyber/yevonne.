<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#ff6b9d">
    <meta name="description" content="Yevonne App - Your personal companion with love, faith, and daily support">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Yevonne">
    <title>Yevonne ğŸ’•</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/style.css">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
</head>
<body>
    <!-- PWA Install Prompt -->
    <div id="pwaInstallPrompt" class="pwa-prompt" style="display: none;">
        <div class="pwa-prompt-content">
            <span class="pwa-icon">ğŸ“±</span>
            <p>Install Yevonne App for the best experience!</p>
            <div class="pwa-buttons">
                <button class="btn btn-small" onclick="installPWA()">Install</button>
                <button class="btn btn-small btn-outline" onclick="dismissPWA()">Maybe Later</button>
            </div>
        </div>
    </div>

    <!-- Floating Hearts -->
    <div class="hearts-container" id="heartsContainer"></div>

    <!-- Sparkles -->
    <div class="sparkles" id="sparkles"></div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-logo">ğŸ’•</div>
            <h1>Welcome to Yevonne</h1>
            <p>Your personal love companion</p>
            
            <div id="pinForm" class="pin-form">
                <p>Enter your PIN</p>
                <div class="pin-inputs">
                    <input type="password" maxlength="1" class="pin-digit" id="pin1">
                    <input type="password" maxlength="1" class="pin-digit" id="pin2">
                    <input type="password" maxlength="1" class="pin-digit" id="pin3">
                    <input type="password" maxlength="1" class="pin-digit" id="pin4">
                </div>
                <button class="btn" onclick="verifyPIN()">Enter ğŸ’•</button>
                <p class="login-hint">Default PIN: 1234</p>
            </div>
            
            <div id="biometricBtn" style="display: none;">
                <button class="btn" onclick="biometricLogin()">ğŸ” Unlock with Face ID</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <!-- Navigation -->
        <nav class="nav-bar">
            <div class="nav-content">
                <div class="nav-brand">ğŸ’• Yevonne</div>
                <div class="nav-menu" id="navMenu">
                    <button class="nav-btn active" onclick="showPage('home')">ğŸ  Home</button>
                    <button class="nav-btn" onclick="showPage('morning')">ğŸŒ… Morning</button>
                    <button class="nav-btn" onclick="showPage('chat')">ğŸ’¬ Jofrey</button>
                    <button class="nav-btn" onclick="showPage('mood')">ğŸ˜Š Mood</button>
                    <button class="nav-btn" onclick="showPage('memories')">ğŸ“¸ Memories</button>
                    <button class="nav-btn" onclick="showPage('timeline')">â³ Timeline</button>
                    <button class="nav-btn" onclick="showPage('favorites')">ğŸ½ï¸ Favorites</button>
                    <button class="nav-btn" onclick="showPage('bible')">âœï¸ Bible</button>
                    <button class="nav-btn" onclick="showPage('prayer')">ğŸ™ Prayer</button>
                    <button class="nav-btn" onclick="showPage('wishes')">âœ¨ Wishes</button>
                    <button class="nav-btn" onclick="showPage('vault')">ğŸ” Vault</button>
                    <button class="nav-btn" onclick="showPage('selfcare')">ğŸª Self-Care</button>
                    <button class="nav-btn" onclick="showPage('achievements')">ğŸ† Achievements</button>
                    <button class="nav-btn" onclick="showPage('emergency')">ğŸ†˜ Emergency</button>
                </div>
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">â˜°</button>
            </div>
        </nav>

        <!-- HOME PAGE -->
        <div id="home" class="page active">
            <div class="page-content home-content">
                <h1 class="main-title">Good Morning Yevonne! ğŸŒ¸</h1>
                <div class="name">YEVONNE</div>
                <div class="big-heart">â¤ï¸</div>
                
                <div class="card">
                    <h2>You Are Deeply Loved ğŸ’–</h2>
                    <p id="dailyMessage">"The Lord bless you and keep you" - Numbers 6:24</p>
                </div>
                
                <div class="quick-actions">
                    <button class="btn" onclick="showPage('morning')">ğŸŒ… Today's Message</button>
                    <button class="btn" onclick="showPage('chat')">ğŸ’¬ Talk to Jofrey</button>
                    <button class="btn" onclick="showPage('mood')">ğŸ˜Š How Are You?</button>
                </div>
                
                <div class="card stats-card">
                    <h2>Our Journey Together ğŸ’•</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="daysTogether">0</div>
                            <div class="stat-label">Days Together</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="messagesExchanged">0</div>
                            <div class="stat-label">Messages</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="memoriesCount">0</div>
                            <div class="stat-label">Memories</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="streakDays">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                    </div>
                </div>
                
                <div class="bible-verse">
                    <p>"Love is patient, love is kind. It does not envy, it does not boast, it is not proud."</p>
                    <div class="bible-reference">- 1 Corinthians 13:4</div>
                </div>
            </div>
        </div>

        <!-- MORNING/NIGHT MESSAGE PAGE -->
        <div id="morning" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸŒ… Daily Messages</h1>
                
                <div class="time-selector">
                    <button class="time-btn active" onclick="showTimePeriod('morning')">ğŸŒ… Morning</button>
                    <button class="time-btn" onclick="showTimePeriod('night')">ğŸŒ™ Night</button>
                </div>
                
                <div id="morningContent" class="time-content active">
                    <div class="card message-card">
                        <div class="message-emoji">ğŸŒ¸</div>
                        <h2>Good Morning Yevonne!</h2>
                        <p id="morningMessage">You are deeply loved today. Every sunrise brings new opportunities to experience joy and blessings.</p>
                        <div class="bible-verse">
                            <p id="morningVerse">"The Lord bless you and keep you; the Lord make his face shine on you and be gracious to you."</p>
                            <div class="bible-reference">- Numbers 6:24-25</div>
                        </div>
                    </div>
                    
                    <div class="card lifestyle-card">
                        <h3>ğŸŒ± Daily Reminders</h3>
                        <div class="lifestyle-items">
                            <div class="lifestyle-item" onclick="toggleLifestyle('water')">
                                <span class="lifestyle-icon">ğŸ’§</span>
                                <span>Drink Water</span>
                                <span class="lifestyle-check" id="waterCheck">â—‹</span>
                            </div>
                            <div class="lifestyle-item" onclick="toggleLifestyle('food')">
                                <span class="lifestyle-icon">ğŸ½ï¸</span>
                                <span>Eat Well</span>
                                <span class="lifestyle-check" id="foodCheck">â—‹</span>
                            </div>
                            <div class="lifestyle-item" onclick="toggleLifestyle('rest')">
                                <span class="lifestyle-icon">ğŸ˜´</span>
                                <span>Rest</span>
                                <span class="lifestyle-check" id="restCheck">â—‹</span>
                            </div>
                            <div class="lifestyle-item" onclick="toggleLifestyle('faith')">
                                <span class="lifestyle-icon">ğŸ™</span>
                                <span>Prayer Time</span>
                                <span class="lifestyle-check" id="faithCheck">â—‹</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="nightContent" class="time-content" style="display: none;">
                    <div class="card message-card night-theme">
                        <div class="message-emoji">ğŸŒ™</div>
                        <h2>Good Night Yevonne ğŸŒ¹</h2>
                        <p id="nightMessage">May your dreams be filled with peace and love. You are amazing and deserving of all good things.</p>
                        <div class="bible-verse">
                            <p id="nightVerse">"When you lie down, you will not be afraid; when you lie down, your sleep will be sweet."</p>
                            <div class="bible-reference">- Proverbs 3:24</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>ğŸŒ¸ Gratitude</h3>
                        <textarea id="gratitudeInput" placeholder="What are you grateful for today?"></textarea>
                        <button class="btn btn-small" onclick="saveGratitude()">Save ğŸ’•</button>
                    </div>
                </div>
                
                <div class="card surprise-card">
                    <h3>ğŸ Surprise Love Drop!</h3>
                    <div id="surpriseContent">
                        <p>Check back later for a surprise! ğŸ’Œ</p>
                    </div>
                    <button class="btn btn-small" onclick="triggerSurprise()">Get Surprise Now! ğŸ</button>
                </div>
            </div>
        </div>

        <!-- JOFFREY CHAT PAGE -->
        <div id="chat" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 10px;">ğŸ’¬ Chat with Jofrey</h1>
                <p style="text-align: center; color: #ffd1dc; margin-bottom: 20px;">Your loving AI companion ğŸ’</p>
                
                <div class="chat-container">
                    <div class="chat-header">
                        <div class="chat-avatar">ğŸ¤–</div>
                        <div class="chat-info">
                            <h2 style="color: #ff6b9d; margin: 0;">Jofrey ğŸ’•</h2>
                            <p style="margin: 0; color: #81c784; font-size: 0.8rem;">â— Online</p>
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot">
                            <p>Hi Yevonne! ğŸ’• I'm Jofrey, your loving AI companion! 
                            I'm here to chat, support you, and share love every day.
                            How are you feeling today? ğŸ˜Š</p>
                        </div>
                    </div>
                    
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                    
                    <div class="chat-input-area">
                        <input type="text" class="chat-input" id="chatInput" 
                               placeholder="Type your message..." 
                               onkeypress="if(event.key==='Enter') sendMessage()">
                        <button class="send-btn" onclick="sendMessage()">Send ğŸ’•</button>
                    </div>
                    
                    <div class="quick-replies">
                        <button class="quick-reply" onclick="quickReply('I love you')">â¤ï¸ I love you</button>
                        <button class="quick-reply" onclick="quickReply('Tell me something sweet')">ğŸ¯ Sweet</button>
                        <button class="quick-reply" onclick="quickReply('Give me encouragement')">âœ¨ Encouragement</button>
                        <button class="quick-reply" onclick="quickReply('I need comfort')">ğŸ¤— Comfort</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MOOD CHECK-IN PAGE -->
        <div id="mood" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ˜Š How Are You Feeling?</h1>
                
                <div class="mood-selector">
                    <button class="mood-btn" onclick="selectMood('happy')">
                        <span class="mood-emoji">ğŸ˜Š</span>
                        <span>Happy</span>
                    </button>
                    <button class="mood-btn" onclick="selectMood('sad')">
                        <span class="mood-emoji">ğŸ˜”</span>
                        <span>Sad</span>
                    </button>
                    <button class="mood-btn" onclick="selectMood('tired')">
                        <span class="mood-emoji">ğŸ˜´</span>
                        <span>Tired</span>
                    </button>
                    <button class="mood-btn" onclick="selectMood('stressed')">
                        <span class="mood-emoji">ğŸ˜°</span>
                        <span>Stressed</span>
                    </button>
                    <button class="mood-btn" onclick="selectMood('loved')">
                        <span class="mood-emoji">â¤ï¸</span>
                        <span>Loved</span>
                    </button>
                    <button class="mood-btn" onclick="selectMood('grateful')">
                        <span class="mood-emoji">ğŸ™</span>
                        <span>Grateful</span>
                    </button>
                </div>
                
                <div id="moodResponse" class="card" style="display: none;">
                    <div class="mood-response">
                        <div id="moodEmoji" class="mood-response-emoji"></div>
                        <h2 id="moodTitle"></h2>
                        <p id="moodMessage"></p>
                        
                        <div id="moodSuggestions">
                            <h3>ğŸ’¡ Suggestions:</h3>
                            <div id="suggestionList"></div>
                        </div>
                        
                        <div id="musicSuggestion" style="display: none;">
                            <h3>ğŸµ Recommended Music:</h3>
                            <button class="btn btn-small" onclick="playMoodMusic()">Play ğŸ¶</button>
                        </div>
                        
                        <div id="verseSuggestion" style="display: none;">
                            <div class="bible-verse">
                                <p id="verseText"></p>
                                <div class="bible-reference" id="verseRef"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MEMORIES PAGE -->
        <div id="memories" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ“¸ Our Beautiful Memories</h1>
                
                <div class="memory-controls">
                    <button class="btn btn-small" onclick="showAddMemoryForm()">â• Add Memory</button>
                    <button class="btn btn-small" onclick="viewMemoryTimeline()">ğŸ“… Timeline View</button>
                </div>
                
                <div id="addMemoryForm" class="card" style="display: none;">
                    <h2>Add New Memory</h2>
                    <input type="text" placeholder="Memory title..." id="memoryTitle">
                    <input type="text" placeholder="Emoji (e.g., ğŸ’‘, âœˆï¸, ğŸ¬)..." id="memoryEmoji">
                    <textarea placeholder="Describe this beautiful memory..." id="memoryDesc"></textarea>
                    <input type="date" id="memoryDate">
                    <input type="file" id="memoryPhoto" accept="image/*">
                    <button class="btn" onclick="saveMemory()">Save Memory ğŸ’•</button>
                    <button class="btn btn-outline" onclick="cancelAddMemory()">Cancel</button>
                </div>
                
                <div class="memory-grid" id="memoriesGrid">
                    <!-- Memories will be loaded here -->
                </div>
                
                <div class="card" id="noMemories" style="text-align: center;">
                    <p style="color: #ffd1dc;">No memories yet! Start creating beautiful moments together ğŸ’•</p>
                </div>
            </div>
        </div>

        <!-- TIMELINE PAGE -->
        <div id="timeline" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">â³ Our Journey Together</h1>
                
                <div class="timeline-container" id="timelineContainer">
                    <!-- Timeline will be rendered here -->
                </div>
            </div>
        </div>

        <!-- FAVORITES PAGE -->
        <div id="favorites" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ½ï¸ Yevonne's Favorites</h1>
                
                <div class="favorites-grid">
                    <div class="card favorite-card">
                        <h3>ğŸŸ Favorite Food</h3>
                        <div class="favorite-item">
                            <span class="favorite-icon">ğŸŸ</span>
                            <span id="favoriteFood">Ugali with Fish</span>
                        </div>
                        <button class="btn btn-small" onclick="editFavorite('food')">Edit</button>
                    </div>
                    
                    <div class="card favorite-card">
                        <h3>ğŸ” Other Favorite</h3>
                        <div class="favorite-item">
                            <span class="favorite-icon">ğŸ”</span>
                            <span id="favoriteBurger">Burger</span>
                        </div>
                        <button class="btn btn-small" onclick="editFavorite('burger')">Edit</button>
                    </div>
                    
                    <div class="card favorite-card">
                        <h3>ğŸ¥¤ Favorite Drink</h3>
                        <div class="favorite-item">
                            <span class="favorite-icon">ğŸ¥¤</span>
                            <span id="favoriteDrink">K-Vant</span>
                        </div>
                        <button class="btn btn-small" onclick="editFavorite('drink')">Edit</button>
                    </div>
                    
                    <div class="card favorite-card">
                        <h3>ğŸµ Favorite Song</h3>
                        <div class="favorite-item">
                            <span class="favorite-icon">ğŸµ</span>
                            <span id="favoriteSong">To be added...</span>
                        </div>
                        <button class="btn btn-small" onclick="editFavorite('song')">Edit</button>
                    </div>
                    
                    <div class="card favorite-card">
                        <h3>âœï¸ Favorite Verse</h3>
                        <div class="favorite-item">
                            <span class="favorite-icon">âœï¸</span>
                            <span id="favoriteVerse">"Love is patient, love is kind..."</span>
                        </div>
                        <button class="btn btn-small" onclick="editFavorite('verse')">Edit</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- BIBLE PAGE -->
        <div id="bible" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">âœï¸ Bible & Faith Corner</h1>
                
                <div class="card">
                    <h2>ğŸ“– Daily Verse</h2>
                    <p id="dailyBibleVerse" style="font-size: 1.3rem; font-style: italic;">"For God so loved the world that he gave his one and only Son..."</p>
                    <div class="bible-reference" id="dailyBibleRef">- John 3:16</div>
                    <button class="btn btn-small" onclick="newDailyVerse()">New Verse âœ¨</button>
                </div>
                
                <div class="card">
                    <h2>ğŸ’• Love Verses</h2>
                    <div class="verses-list" id="loveVerses">
                        <div class="verse-item" onclick="showVerse('1 Corinthians 13:4-7')">
                            <p>"Love is patient, love is kind..."</p>
                        </div>
                        <div class="verse-item" onclick="showVerse('Song of Solomon 8:6')">
                            <p>"Place me like a seal over your heart..."</p>
                        </div>
                        <div class="verse-item" onclick="showVerse('Romans 8:38-39')">
                            <p>"Nothing can separate us from God's love..."</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>ğŸ™ Faith Encouragement</h2>
                    <p id="faithEncouragement">"Trust in the Lord with all your heart..."</p>
                    <button class="btn btn-small" onclick="newFaithEncouragement()">More ğŸ’«</button>
                </div>
            </div>
        </div>

        <!-- PRAYER PAGE -->
        <div id="prayer" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ™ Prayer & Gratitude Journal</h1>
                
                <div class="prayer-tabs">
                    <button class="tab-btn active" onclick="showPrayerTab('prayers')">Prayers</button>
                    <button class="tab-btn" onclick="showPrayerTab('gratitude')">Gratitude</button>
                    <button class="tab-btn" onclick="showPrayerTab('reflections')">Reflections</button>
                </div>
                
                <div id="prayersTab" class="prayer-tab-content active">
                    <div class="card">
                        <h3>Write a Prayer</h3>
                        <textarea id="prayerInput" placeholder="Dear Lord, thank you for..."></textarea>
                        <button class="btn" onclick="savePrayer()">Send Prayer ğŸ™</button>
                    </div>
                    
                    <div id="prayersList" class="prayers-list">
                        <!-- Prayers will be listed here -->
                    </div>
                </div>
                
                <div id="gratitudeTab" class="prayer-tab-content" style="display: none;">
                    <div class="card">
                        <h3>What Are You Grateful For?</h3>
                        <textarea id="gratitudeEntry" placeholder="Today I am grateful for..."></textarea>
                        <button class="btn" onclick="saveGratitudeEntry()">Save Gratitude ğŸ’•</button>
                    </div>
                    
                    <div id="gratitudeList" class="gratitude-list">
                        <!-- Gratitude entries will be listed here -->
                    </div>
                </div>
                
                <div id="reflectionsTab" class="prayer-tab-content" style="display: none;">
                    <div class="card">
                        <h3>Daily Reflection</h3>
                        <textarea id="reflectionInput" placeholder="Reflect on your day..."></textarea>
                        <button class="btn" onclick="saveReflection()">Save Reflection ğŸŒŸ</button>
                    </div>
                    
                    <div id="reflectionsList" class="reflections-list">
                        <!-- Reflections will be listed here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- WISHES PAGE -->
        <div id="wishes" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">âœ¨ Wishes & Dreams</h1>
                
                <div class="card">
                    <h3>Make a Wish</h3>
                    <input type="text" id="wishInput" placeholder="I wish for...">
                    <select id="wishCategory">
                        <option value="travel">âœˆï¸ Travel Dream</option>
                        <option value="goals">ğŸ¯ Life Goal</option>
                        <option value="relationship">ğŸ’‘ Relationship</option>
                        <option value="faith">ğŸ™ Faith</option>
                        <option value="health">ğŸƒâ€â™€ï¸ Health</option>
                        <option value="career">ğŸ’¼ Career</option>
                        <option value="other">â­ Other</option>
                    </select>
                    <button class="btn" onclick="addWish()">Add Wish âœ¨</button>
                </div>
                
                <div class="wishes-categories">
                    <button class="category-btn active" onclick="filterWishes('all')">All</button>
                    <button class="category-btn" onclick="filterWishes('pending')">Pending</button>
                    <button class="category-btn" onclick="filterWishes('completed')">Completed</button>
                </div>
                
                <div id="wishesList" class="wishes-list">
                    <!-- Wishes will be listed here -->
                </div>
            </div>
        </div>

        <!-- VAULT PAGE -->
        <div id="vault" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ” Secret Love Vault</h1>
                
                <div class="card vault-intro">
                    <p>ğŸ”’ Your private space for storing precious memories, notes, and confessions.</p>
                    <p style="color: #81c784;">Protected with Face ID / PIN</p>
                </div>
                
                <div id="vaultLocked" class="vault-locked">
                    <div class="vault-icon">ğŸ”</div>
                    <button class="btn" onclick="unlockVault()">ğŸ”“ Unlock Vault</button>
                </div>
                
                <div id="vaultUnlocked" class="vault-unlocked" style="display: none;">
                    <div class="vault-tabs">
                        <button class="vault-tab active" onclick="showVaultTab('notes')">ğŸ“ Notes</button>
                        <button class="vault-tab" onclick="showVaultTab('voice')">ğŸ¤ Voice</button>
                        <button class="vault-tab" onclick="showVaultTab('photos')">ğŸ“¸ Photos</button>
                        <button class="vault-tab" onclick="showVaultTab('confessions')">ğŸ’• Confessions</button>
                    </div>
                    
                    <div id="vaultNotesTab" class="vault-tab-content active">
                        <div class="card">
                            <textarea id="vaultNote" placeholder="Write a private note..."></textarea>
                            <button class="btn btn-small" onclick="saveVaultNote()">Save Note ğŸ”’</button>
                        </div>
                        <div id="vaultNotesList"></div>
                    </div>
                    
                    <div id="vaultVoiceTab" class="vault-tab-content" style="display: none;">
                        <button class="btn" onclick="startVoiceRecording()">ğŸ¤ Record Voice Message</button>
                        <div id="voiceRecordingsList"></div>
                    </div>
                    
                    <div id="vaultPhotosTab" class="vault-tab-content" style="display: none;">
                        <input type="file" accept="image/*" id="vaultPhoto">
                        <button class="btn btn-small" onclick="saveVaultPhoto()">Save Photo ğŸ”’</button>
                        <div id="vaultPhotosGrid"></div>
                    </div>
                    
                    <div id="vaultConfessionsTab" class="vault-tab-content" style="display: none;">
                        <div class="card">
                            <textarea id="confessionInput" placeholder="Write your confession..."></textarea>
                            <button class="btn btn-small" onclick="saveConfession()">Save Confession ğŸ’•</button>
                        </div>
                        <div id="confessionsList"></div>
                    </div>
                    
                    <button class="btn btn-outline" onclick="lockVault()">ğŸ”’ Lock Vault</button>
                </div>
            </div>
        </div>

        <!-- SELF-CARE PAGE -->
        <div id="selfcare" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸª Self-Care & Beauty</h1>
                
                <div class="selfcare-reminders">
                    <div class="card reminder-card">
                        <div class="reminder-icon">ğŸ’§</div>
                        <div class="reminder-info">
                            <h3>Drink Water</h3>
                            <p>Stay hydrated throughout the day</p>
                        </div>
                        <div class="reminder-status" id="waterReminderStatus">Not tracked</div>
                        <button class="btn btn-small" onclick="toggleWaterReminder()">Track ğŸ’§</button>
                    </div>
                    
                    <div class="card reminder-card">
                        <div class="reminder-icon">ğŸ½ï¸</div>
                        <div class="reminder-info">
                            <h3>Eat Well</h3>
                            <p>Nourish your body with good food</p>
                        </div>
                        <div class="reminder-status" id="foodReminderStatus">Not tracked</div>
                        <button class="btn btn-small" onclick="toggleFoodReminder()">Track ğŸ½ï¸</button>
                    </div>
                    
                    <div class="card reminder-card">
                        <div class="reminder-icon">ğŸ˜´</div>
                        <div class="reminder-info">
                            <h3>Rest</h3>
                            <p>Get enough sleep tonight</p>
                        </div>
                        <div class="reminder-status" id="restReminderStatus">Not tracked</div>
                        <button class="btn btn-small" onclick="toggleRestReminder()">Track ğŸ˜´</button>
                    </div>
                </div>
                
                <div class="card affirmations-card">
                    <h2>ğŸ’– Daily Affirmations</h2>
                    <div id="affirmationDisplay" class="affirmation-display">
                        <p>"You are beautiful"</p>
                    </div>
                    <button class="btn btn-small" onclick="newAffirmation()">New Affirmation âœ¨</button>
                    
                    <div class="affirmations-list">
                        <p onclick="showAffirmation('You are beautiful')">"You are beautiful"</p>
                        <p onclick="showAffirmation('You matter')">"You matter"</p>
                        <p onclick="showAffirmation('You are enough')">"You are enough"</p>
                        <p onclick="showAffirmation('You are loved')">"You are loved"</p>
                        <p onclick="showAffirmation('You are strong')">"You are strong"</p>
                        <p onclick="showAffirmation('You are capable')">"You are capable"</p>
                    </div>
                </div>
                
                <div class="card beauty-tips-card">
                    <h2>ğŸ’… Beauty Tips</h2>
                    <div id="beautyTip" class="beauty-tip">
                        <p>Stay hydrated for glowing skin! ğŸ’§</p>
                    </div>
                    <button class="btn btn-small" onclick="newBeautyTip()">New Tip ğŸ’«</button>
                </div>
            </div>
        </div>

        <!-- ACHIEVEMENTS PAGE -->
        <div id="achievements" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ† Love Achievements</h1>
                
                <div class="achievements-summary">
                    <div class="card">
                        <h3>Your Progress</h3>
                        <div class="progress-bar-container">
                            <div class="progress-fill" id="achievementProgress" style="width: 0%"></div>
                        </div>
                        <p id="achievementCount">0 / 20 Achievements Unlocked</p>
                    </div>
                </div>
                
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Achievements will be rendered here -->
                </div>
            </div>
        </div>

        <!-- EMERGENCY PAGE -->
        <div id="emergency" class="page">
            <div class="page-content">
                <h1 style="text-align: center; color: #ff6b9d; margin-bottom: 20px;">ğŸ†˜ Emergency Comfort</h1>
                
                <div class="card emergency-intro">
                    <p>Sometimes life feels heavy. It's okay. You're not alone. ğŸ’™</p>
                    <p>Tap below for immediate comfort and support.</p>
                </div>
                
                <div class="emergency-actions">
                    <button class="btn emergency-btn" onclick="emergencyComfort()">
                        <span class="emergency-icon">ğŸ’™</span>
                        <span>Send Comfort</span>
                    </button>
                    
                    <button class="btn emergency-btn" onclick="emergencyMusic()">
                        <span class="emergency-icon">ğŸµ</span>
                        <span>Calm Music</span>
                    </button>
                    
                    <button class="btn emergency-btn" onclick="emergencyPrayer()">
                        <span class="emergency-icon">ğŸ™</span>
                        <span>Quick Prayer</span>
                    </button>
                    
                    <button class="btn emergency-btn" onclick="openEmergencyChat()">
                        <span class="emergency-icon">ğŸ’¬</span>
                        <span>Talk to Jofrey</span>
                    </button>
                </div>
                
                <div id="emergencyResponse" class="card" style="display: none;">
                    <div class="emergency-response">
                        <p id="emergencyMessage"></p>
                        <div id="emergencyVerse" class="bible-verse" style="display: none;"></div>
                    </div>
                </div>
                
                <div class="card emergency-quotes">
                    <h3>ğŸ’™ Remember</h3>
                    <p id="emergencyQuote">"This too shall pass. You are stronger than you know."</p>
                    <button class="btn btn-small" onclick="newEmergencyQuote()">New Quote ğŸŒŸ</button>
                </div>
            </div>
        </div>
        
        <!-- MUSIC PLAYER (Shared across pages) -->
        <div id="musicPlayer" class="music-player-bar" style="display: none;">
            <div class="music-info">
                <span id="currentSongTitle">No song playing</span>
            </div>
            <div class="music-controls">
                <button class="music-btn" onclick="toggleMusic()">â¯ï¸</button>
                <button class="music-btn" onclick="closeMusic()">âœ–ï¸</button>
            </div>
        </div>
        
        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script>
        // ==================== APP STATE ====================
        const APP_STATE = {
            user: 'Yevonne',
            phone: '0753198752',
            pin: '1234',
            isLoggedIn: false,
            vaultUnlocked: false,
            currentPage: 'home',
            currentMood: null,
            currentTimePeriod: 'morning',
            musicPlaying: false,
            currentSong: null
        };

        // ==================== STORAGE KEYS ====================
        const STORAGE_KEYS = {
            memories: 'yevonne_memories',
            wishes: 'yevonne_wishes',
            stories: 'yevonne_stories',
            books: 'yevonne_books',
            prayers: 'yevonne_prayers',
            gratitude: 'yevonne_gratitude',
            reflections: 'yevonne_reflections',
            vaultNotes: 'yevonne_vault_notes',
            vaultConfessions: 'yevonne_vault_confessions',
            moodHistory: 'yevonne_mood_history',
            achievements: 'yevonne_achievements',
            lifestyle: 'yevonne_lifestyle',
            startDate: 'yevonne_start_date',
            songs: 'yevonne_songs',
            conversations: 'yevonne_conversations'
        };

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            createHearts();
            createSparkles();
        });

        async function initializeApp() {
            // Check if PWA is already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log('App is running as PWA');
            }
            
            // Check for saved login state
            const savedLogin = localStorage.getItem('yevonne_logged_in');
            if (savedLogin === 'true') {
                APP_STATE.isLoggedIn = true;
                showMainApp();
            }
            
            // Register service worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('Service Worker registered:', reg.scope))
                    .catch(err => console.error('Service Worker registration failed:', err));
            }
            
            // Request notification permission
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
            
            // Check for biometric support
            if ('FaceID' in window || (window.PublicKeyCredential && window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable)) {
                document.getElementById('biometricBtn').style.display = 'block';
            }
            
            // Initialize data
            initializeData();
            loadAchievements();
            updateStats();
        }

        function initializeData() {
            // Set start date if not set
            if (!localStorage.getItem(STORAGE_KEYS.startDate)) {
                localStorage.setItem(STORAGE_KEYS.startDate, '2024-01-14');
            }
            
            // Initialize sample memories
            if (!localStorage.getItem(STORAGE_KEYS.memories)) {
                const sampleMemories = [
                    { id: 1, title: 'First Message', emoji: 'ğŸ’Œ', desc: 'The beginning of something beautiful', date: '2024-01-14' },
                    { id: 2, title: 'First Call', emoji: 'ğŸ“', desc: 'Hearing your voice for the first time', date: '2024-01-20' },
                    { id: 3, title: 'First Meet', emoji: 'ğŸ’‘', desc: 'Finally meeting in person', date: '2024-02-14' }
                ];
                localStorage.setItem(STORAGE_KEYS.memories, JSON.stringify(sampleMemories));
            }
            
            // Initialize sample wishes
            if (!localStorage.getItem(STORAGE_KEYS.wishes)) {
                const sampleWishes = [
                    { id: 1, text: 'Visit Tokyo Together', category: 'travel', status: 'pending' },
                    { id: 2, text: 'Grow Together in Faith', category: 'faith', status: 'pending' },
                    { id: 3, text: 'Build Our Dream Home', category: 'goals', status: 'pending' }
                ];
                localStorage.setItem(STORAGE_KEYS.wishes, JSON.stringify(sampleWishes));
            }
            
            // Initialize songs
            if (!localStorage.getItem(STORAGE_KEYS.songs)) {
                const sampleSongs = [
                    { id: 1, title: 'Perfect', artist: 'Ed Sheeran', category: 'romantic' },
                    { id: 2, title: 'All of Me', artist: 'John Legend', category: 'romantic' },
                    { id: 3, title: 'What a Beautiful Name', artist: 'Hillsong', category: 'worship' }
                ];
                localStorage.setItem(STORAGE_KEYS.songs, JSON.stringify(sampleSongs));
            }
        }

        // ==================== LOGIN FUNCTIONS ====================
        function verifyPIN() {
            const pin = document.getElementById('pin1').value +
                       document.getElementById('pin2').value +
                       document.getElementById('pin3').value +
                       document.getElementById('pin4').value;
            
            if (pin === APP_STATE.pin) {
                APP_STATE.isLoggedIn = true;
                localStorage.setItem('yevonne_logged_in', 'true');
                showMainApp();
                showToast('Welcome to Yevonne! ğŸ’•');
            } else {
                showToast('Incorrect PIN. Try again.');
                document.querySelectorAll('.pin-digit').forEach(input => input.value = '');
                document.getElementById('pin1').focus();
            }
        }

        async function biometricLogin() {
            if (window.PublicKeyCredential) {
                try {
                    const credential = await navigator.credentials.create({
                        publicKey: {
                            challenge: new Uint8Array(32),
                            rp: { name: 'Yevonne' },
                            user: {
                                id: new Uint8Array([1]),
                                name: 'Yevonne',
                                displayName: 'Yevonne'
                            },
                            pubKeyCredParams: [{ type: 'public-key', alg: -7 }]
                        }
                    });
                    APP_STATE.isLoggedIn = true;
                    localStorage.setItem('yevonne_logged_in', 'true');
                    showMainApp();
                } catch (error) {
                    console.log('Biometric login not available:', error);
                    showToast('Biometric login not available. Use PIN.');
                }
            }
        }

        // PIN input handling
        document.querySelectorAll('.pin-digit').forEach((input, index) => {
            input.addEventListener('input', (e) => {
                if (e.target.value.length === 1 && index < 3) {
                    document.querySelectorAll('.pin-digit')[index + 1].focus();
                }
            });
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && !e.target.value && index > 0) {
                    document.querySelectorAll('.pin-digit')[index - 1].focus();
                }
            });
        });

        function showMainApp() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            loadAllData();
        }

        // ==================== NAVIGATION ====================
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            APP_STATE.currentPage = pageId;
            
            // Load page-specific data
            loadPageData(pageId);
            
            // Close mobile menu
            document.querySelector('.nav-menu').classList.remove('active');
        }

        function loadPageData(pageId) {
            switch(pageId) {
                case 'memories':
                    loadMemories();
                    break;
                case 'wishes':
                    loadWishes();
                    break;
                case 'prayer':
                    loadPrayers();
                    break;
                case 'timeline':
                    loadTimeline();
                    break;
                case 'achievements':
                    loadAchievements();
                    break;
            }
        }

        function toggleMobileMenu() {
            document.querySelector('.nav-menu').classList.toggle('active');
        }

        // ==================== ANIMATIONS ====================
        function createHearts() {
            const container = document.getElementById('heartsContainer');
            const hearts = ['â¤ï¸', 'ğŸ’•', 'ğŸ’—', 'ğŸ’–', 'ğŸ’“', 'ğŸ’˜', 'ğŸ’'];
            
            for (let i = 0; i < 25; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDelay = Math.random() * 8 + 's';
                    heart.style.animationDuration = (6 + Math.random() * 4) + 's';
                    heart.style.fontSize = (15 + Math.random() * 20) + 'px';
                    container.appendChild(heart);
                    
                    // Remove heart after animation
                    setTimeout(() => heart.remove(), 12000);
                }, i * 300);
            }
            
            // Keep creating hearts
            setInterval(() => {
                if (document.visibilityState === 'visible') {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDelay = '0s';
                    heart.style.animationDuration = (6 + Math.random() * 4) + 's';
                    heart.style.fontSize = (15 + Math.random() * 20) + 'px';
                    container.appendChild(heart);
                    
                    setTimeout(() => heart.remove(), 12000);
                }
            }, 1500);
        }

        function createSparkles() {
            const container = document.getElementById('sparkles');
            
            for (let i = 0; i < 40; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.width = (2 + Math.random() * 4) + 'px';
                sparkle.style.height = sparkle.style.width;
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                sparkle.style.animationDuration = (2 + Math.random() * 2) + 's';
                container.appendChild(sparkle);
            }
        }

        // ==================== LOAD ALL DATA ====================
        function loadAllData() {
            loadMemories();
            loadWishes();
            loadPrayers();
            loadGratitude();
            loadAchievements();
            updateStats();
        }

        // ==================== TOAST NOTIFICATIONS ====================
        function showToast(message) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ==================== PWA INSTALL ====================
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('pwaInstallPrompt').style.display = 'block';
        });

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(result => {
                    if (result.outcome === 'accepted') {
                        showToast('App installed successfully! ğŸ’•');
                    }
                    deferredPrompt = null;
                });
            }
            dismissPWA();
        }

        function dismissPWA() {
            document.getElementById('pwaInstallPrompt').style.display = 'none';
        }

        // ==================== CHAT FUNCTIONS ====================
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage('user', message);
            input.value = '';
            
            // Show typing indicator
            showTyping();
            
            // Simulate Jofrey response
            setTimeout(() => {
                hideTyping();
                const response = generateJofreyResponse(message);
                addMessage('bot', response);
                saveConversation(message, response);
            }, 1500 + Math.random() * 1000);
        }

        function quickReply(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        function addMessage(type, text) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `<p>${text}</p>`;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTyping() {
            document.getElementById('typingIndicator').classList.add('show');
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }

        function hideTyping() {
            document.getElementById('typingIndicator').classList.remove('show');
        }

        function generateJofreyResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Love responses
            if (lowerMessage.includes('love') || lowerMessage.includes('â¤ï¸')) {
                return `I love you too, Yevonne! ğŸ’• You mean everything to me. Every moment with you is a blessing. You are my sunshine, my inspiration, and my greatest joy. ğŸŒ¸`;
            }
            
            // Sad/down responses
            if (lowerMessage.includes('sad') || lowerMessage.includes('cry') || lowerMessage.includes('miss')) {
                return `I understand, my love. ğŸ’™ It's okay to feel down sometimes. Remember that you're not alone. I'm always here for you. Let me share some comfort: "${getRandomEncouragement()}"`;
            }
            
            // Encouragement
            if (lowerMessage.includes('encouragement') || lowerMessage.includes('support') || lowerMessage.includes('help')) {
                return `You are strong, capable, and amazing! âœ¨ Remember: "The Lord is my strength and my shield; I trust him with all my heart." (Proverbs 3:5) You've got this!`;
            }
            
            // Morning/greeting
            if (lowerMessage.includes('morning') || lowerMessage.includes('hi') || lowerMessage.includes('hello')) {
                return `Good morning, beautiful Yevonne! ğŸŒ¸ How is your day going? I'm here to make it brighter!`;
            }
            
            // Default response
            return `I'm always here for you, Yevonne! ğŸ’• Tell me more about what's on your mind. I'm listening with all my heart.`;
        }

        function getRandomEncouragement() {
            const encouragements = [
                "This too shall pass. You are stronger than you know.",
                "Every storm runs out of rain. brighter days are coming.",
                "You are loved beyond measure.",
                "Your feelings are valid. Take all the time you need.",
                "I believe in you, always."
            ];
            return encouragements[Math.floor(Math.random() * encouragements.length)];
        }

        function saveConversation(userMsg, botResponse) {
            const conversations = JSON.parse(localStorage.getItem(STORAGE_KEYS.conversations) || '[]');
            conversations.push({
                user: userMsg,
                bot: botResponse,
                timestamp: new Date().toISOString()
            });
            // Keep only last 100 conversations
            if (conversations.length > 100) {
                conversations.shift();
            }
            localStorage.setItem(STORAGE_KEYS.conversations, JSON.stringify(conversations));
        }

        // ==================== MOOD FUNCTIONS ====================
        function selectMood(mood) {
            APP_STATE.currentMood = mood;
            
            const moodData = {
                happy: { emoji: 'ğŸ˜Š', title: 'Happy!', message: 'Your joy lights up the world! Keep smiling! ğŸŒŸ' },
                sad: { emoji: 'ğŸ˜”', title: 'Feeling Down', message: 'It\'s okay to feel sad sometimes. I\'m here for you. ğŸ’™' },
                tired: { emoji: 'ğŸ˜´', title: 'Tired', message: 'Rest is important. Take care of yourself, my love. ğŸŒ¸' },
                stressed: { emoji: 'ğŸ˜°', title: 'Stressed', message: 'Breathe deeply. You\'ve got this! ğŸ™' },
                loved: { emoji: 'â¤ï¸', title:Feeling Loved', message: 'You ARE loved! So deeply and completely! ğŸ’•' },
                grateful: { emoji: 'ğŸ™', title: 'Grateful', message: 'Gratitude brings more joy! You\'re amazing! âœ¨' }
            };
            
            const data = moodData[mood];
            
            document.getElementById('moodEmoji').textContent = data.emoji;
            document.getElementById('moodTitle').textContent = data.title;
            document.getElementById('moodMessage').textContent = data.message;
            
            // Show suggestions
            showMoodSuggestions(mood);
            
            document.getElementById('moodResponse').style.display = 'block';
            
            // Save mood
            saveMood(mood);
        }

        function showMoodSuggestions(mood) {
            const suggestions = {
                happy: ['Dance to your favorite song! ğŸ’ƒ', 'Share your joy with someone! ğŸ˜Š', 'Take a moment to appreciate this feeling! ğŸŒ¸'],
                sad: ['Listen to calming music ğŸµ', 'Write about your feelings ğŸ“', 'Get a hug from someone you love ğŸ¤—'],
                tired: ['Take a short nap ğŸ˜´', 'Drink some water ğŸ’§', 'Do some gentle stretching ğŸ§˜'],
                stressed: ['Practice deep breathing ğŸ§˜', 'Take a walk outside ğŸŒ³', 'Listen to relaxing music ğŸ¶'],
                loved: ['Send love to someone else ğŸ’•', 'Share your gratitude ğŸ™', 'Spread the love! ğŸŒŸ'],
                grateful: ['Write a gratitude list ğŸ“', 'Share your gratitude with others ğŸ’¬', 'Celebrate this feeling! ğŸ‰']
            };
            
            const list = document.getElementById('suggestionList');
            list.innerHTML = suggestions[mood].map(s => `<p>â€¢ ${s}</p>`).join('');
            
            // Show music suggestion
            document.getElementById('musicSuggestion').style.display = 'block';
            document.getElementById('verseSuggestion').style.display = 'block';
            
            const verses = {
                happy: { text: '"Rejoice in the Lord always. I will say it again: Rejoice!"', ref: '- Philippians 4:4' },
                sad: { text: '"The Lord is near to the brokenhearted and saves the crushed in spirit."', ref: '- Psalm 34:18' },
                tired: { text: '"Come to me, all who labor and are heavy laden, and I will give you rest."', ref: '- Matthew 11:28' },
                stressed: { text: '"Cast all your anxiety on him because he cares for you."', ref: '- 1 Peter 5:7' },
                loved: { text: '"We love because he first loved us."', ref: '- 1 John 4:19' },
                grateful: { text: '"Give thanks in all circumstances; for this is the will of God."', ref: '- 1 Thessalonians 5:18' }
            };
            
            const verse = verses[mood];
            document.getElementById('verseText').textContent = verse.text;
            document.getElementById('verseRef').textContent = verse.ref;
        }

        function saveMood(mood) {
            const moodHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.moodHistory) || '[]');
            moodHistory.push({
                mood,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem(STORAGE_KEYS.moodHistory, JSON.stringify(moodHistory));
            checkMoodAchievements();
        }

        function playMoodMusic() {
            showToast('Playing calming music... ğŸµ');
            // Implement music player
        }

        // ==================== MEMORY FUNCTIONS ====================
        function showAddMemoryForm() {
            document.getElementById('addMemoryForm').style.display = 'block';
        }

        function cancelAddMemory() {
            document.getElementById('addMemoryForm').style.display = 'none';
        }

        function saveMemory() {
            const title = document.getElementById('memoryTitle').value;
            const emoji = document.getElementById('memoryEmoji').value;
            const desc = document.getElementById('memoryDesc').value;
            const date = document.getElementById('memoryDate').value;
            
            if (!title || !emoji) {
                showToast('Please fill in title and emoji!');
                return;
            }
            
            const memories = JSON.parse(localStorage.getItem(STORAGE_KEYS.memories) || '[]');
            memories.unshift({
                id: Date.now(),
                title,
                emoji,
                desc,
                date: date || new Date().toISOString().split('T')[0]
            });
            
            localStorage.setItem(STORAGE_KEYS.memories, JSON.stringify(memories));
            
            showToast('Memory saved! ğŸ’•');
            cancelAddMemory();
            loadMemories();
            unlockAchievement('first_memory');
        }

        function loadMemories() {
            const memories = JSON.parse(localStorage.getItem(STORAGE_KEYS.memories) || '[]');
            const grid = document.getElementById('memoriesGrid');
            
            if (memories.length === 0) {
                grid.innerHTML = '';
                document.getElementById('noMemories').style.display = 'block';
                return;
            }
            
            document.getElementById('noMemories').style.display = 'none';
            grid.innerHTML = memories.map(memory => `
                <div class="memory-card" onclick="viewMemory(${memory.id})">
                    <div class="memory-image">${memory.emoji}</div>
                    <div class="memory-content">
                        <h3>${memory.title}</h3>
                        <p>${memory.desc || ''}</p>
                        <p class="memory-date">ğŸ“… ${memory.date}</p>
                    </div>
                </div>
            `).join('');
        }

        function viewMemory(id) {
            showToast('Opening memory... ğŸ“¸');
        }

        function viewMemoryTimeline() {
            showPage('timeline');
        }

        // ==================== WISHES FUNCTIONS ====================
        function addWish() {
            const text = document.getElementById('wishInput').value;
            const category = document.getElementById('wishCategory').value;
            
            if (!text) {
                showToast('Please write your wish!');
                return;
            }
            
            const wishes = JSON.parse(localStorage.getItem(STORAGE_KEYS.wishes) || '[]');
            wishes.unshift({
                id: Date.now(),
                text,
                category,
                status: 'pending',
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem(STORAGE_KEYS.wishes, JSON.stringify(wishes));
            
            showToast('Wish added! âœ¨');
            document.getElementById('wishInput').value = '';
            loadWishes();
        }

        function loadWishes(filter = 'all') {
            let wishes = JSON.parse(localStorage.getItem(STORAGE_KEYS.wishes) || '[]');
            
            if (filter === 'pending') {
                wishes = wishes.filter(w => w.status === 'pending');
            } else if (filter === 'completed') {
                wishes = wishes.filter(w => w.status === 'completed');
            }
            
            const container = document.getElementById('wishesList');
            container.innerHTML = wishes.map(wish => `
                <div class="wish-item ${wish.status}">
                    <div>
                        <h3>${getCategoryIcon(wish.category)} ${wish.text}</h3>
                        <span class="wish-status ${wish.status}" onclick="toggleWishStatus(${wish.id})">
                            ${wish.status === 'pending' ? 'â—‹ Pending' : 'âœ“ Completed'}
                        </span>
                    </div>
                    <button class="delete-btn" onclick="deleteWish(${wish.id})">Delete</button>
                </div>
            `).join('');
        }

        function filterWishes(filter) {
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadWishes(filter);
        }

        function toggleWishStatus(id) {
            let wishes = JSON.parse(localStorage.getItem(STORAGE_KEYS.wishes) || '[]');
            const wish = wishes.find(w => w.id === id);
            if (wish) {
                wish.status = wish.status === 'pending' ? 'completed' : 'pending';
                localStorage.setItem(STORAGE_KEYS.wishes, JSON.stringify(wishes));
                loadWishes();
                if (wish.status === 'completed') {
                    unlockAchievement('first_wish');
                }
            }
        }

        function deleteWish(id) {
            if (confirm('Delete this wish?')) {
                let wishes = JSON.parse(localStorage.getItem(STORAGE_KEYS.wishes) || '[]');
                wishes = wishes.filter(w => w.id !== id);
                localStorage.setItem(STORAGE_KEYS.wishes, JSON.stringify(wishes));
                loadWishes();
            }
        }

        function getCategoryIcon(category) {
            const icons = {
                travel: 'âœˆï¸',
                goals: 'ğŸ¯',
                relationship: 'ğŸ’‘',
                faith: 'ğŸ™',
                health: 'ğŸƒâ€â™€ï¸',
                career: 'ğŸ’¼',
                other: 'â­'
            };
            return icons[category] || 'â­';
        }

        // ==================== PRAYER FUNCTIONS ====================
        function showPrayerTab(tab) {
            document.querySelectorAll('.prayer-tab-content').forEach(t => t.style.display = 'none');
            document.querySelectorAll('.prayer-tabs .tab-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(tab + 'Tab').style.display = 'block';
            event.target.classList.add('active');
        }

        function savePrayer() {
            const prayer = document.getElementById('prayerInput').value;
            if (!prayer) return;
            
            const prayers = JSON.parse(localStorage.getItem(STORAGE_KEYS.prayers) || '[]');
            prayers.unshift({
                text: prayer,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem(STORAGE_KEYS.prayers, JSON.stringify(prayers));
            showToast('Prayer sent! ğŸ™');
            document.getElementById('prayerInput').value = '';
            loadPrayers();
        }

        function loadPrayers() {
            const prayers = JSON.parse(localStorage.getItem(STORAGE_KEYS.prayers) || '[]');
            const container = document.getElementById('prayersList');
            container.innerHTML = prayers.map((p, i) => `
                <div class="prayer-item">
                    <p>${p.text}</p>
                    <small>${formatDate(p.timestamp)}</small>
                </div>
            `).join('') || '<p style="color: #ffd1dc;">No prayers yet. Write your first prayer! ğŸ™</p>';
        }

        function saveGratitudeEntry() {
            const entry = document.getElementById('gratitudeEntry').value;
            if (!entry) return;
            
            const gratitude = JSON.parse(localStorage.getItem(STORAGE_KEYS.gratitude) || '[]');
            gratitude.unshift({
                text: entry,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem(STORAGE_KEYS.gratitude, JSON.stringify(gratitude));
            showToast('Gratitude saved! ğŸ’•');
            document.getElementById('gratitudeEntry').value = '';
            loadGratitude();
        }

        function loadGratitude() {
            const gratitude = JSON.parse(localStorage.getItem(STORAGE_KEYS.gratitude) || '[]');
            const container = document.getElementById('gratitudeList');
            container.innerHTML = gratitude.map((g, i) => `
                <div class="gratitude-item">
                    <p>${g.text}</p>
                    <small>${formatDate(g.timestamp)}</small>
                </div>
            `).join('') || '<p style="color: #ffd1dc;">No gratitude entries yet!</p>';
        }

        function saveReflection() {
            const reflection = document.getElementById('reflectionInput').value;
            if (!reflection) return;
            
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEYS.reflections) || '[]');
            reflections.unshift({
                text: reflection,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem(STORAGE_KEYS.reflections, JSON.stringify(reflections));
            showToast('Reflection saved! ğŸŒŸ');
            document.getElementById('reflectionInput').value = '';
            loadReflections();
        }

        function loadReflections() {
            const reflections = JSON.parse(localStorage.getItem(STORAGE_KEYS.reflections) || '[]');
            const container = document.getElementById('reflectionsList');
            container.innerHTML = reflections.map((r, i) => `
                <div class="reflection-item">
                    <p>${r.text}</p>
                    <small>${formatDate(r.timestamp)}</small>
                </div>
            `).join('') || '<p style="color: #ffd1dc;">No reflections yet!</p>';
        }

        // ==================== TIMELINE FUNCTIONS ====================
        function loadTimeline() {
            const memories = JSON.parse(localStorage.getItem(STORAGE_KEYS.memories) || '[]');
            const startDate = localStorage.getItem(STORAGE_KEYS.startDate);
            
            // Sort memories by date
            memories.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            const container = document.getElementById('timelineContainer');
            container.innerHTML = memories.map((m, index) => `
                <div class="timeline-item ${index % 2 === 0 ? 'left' : 'right'}">
                    <div class="timeline-content">
                        <div class="timeline-emoji">${m.emoji}</div>
                        <h3>${m.title}</h3>
                        <p>${m.desc}</p>
                        <small>${m.date}</small>
                    </div>
                </div>
            `).join('');
        }

        // ==================== ACHIEVEMENTS FUNCTIONS ====================
        const achievementsList = [
            { id: 'first_memory', name: 'ğŸ“¸ First Memory', description: 'Save your first memory' },
            { id: 'first_wish', name: 'âœ¨ First Wish', description: 'Add your first wish' },
            { id: 'week_streak', name: 'ğŸ”¥ 7 Day Streak', description: 'Use the app for 7 days in a row' },
            { id: 'mood_tracker', name: 'ğŸ˜Š Mood Tracker', description: 'Log your mood 10 times' },
            { id: 'prayer_warrior', name: 'ğŸ™ Prayer Warrior', description: 'Write 5 prayers' },
            { id: 'grateful_heart', name: 'ğŸ’– Grateful Heart', description: 'Write 5 gratitude entries' },
            { id: 'love_story', name: 'ğŸ“– Love Story', description: 'Write your first love story' },
            { id: 'timeline_maker', name: 'â³ Timeline Creator', description: 'Add 5 memories' },
            { id: 'faith_strong', name: 'âœï¸ Strong Faith', description: 'Read 10 Bible verses' },
            { id: 'dream_chaser', name: 'ğŸ¯ Dream Chaser', description: 'Complete 3 wishes' }
        ];

        function loadAchievements() {
            const unlocked = JSON.parse(localStorage.getItem(STORAGE_KEYS.achievements) || '[]');
            const container = document.getElementById('achievementsGrid');
            
            container.innerHTML = achievementsList.map(ach => {
                const isUnlocked = unlocked.includes(ach.id);
                return `
                    <div class="achievement-card ${isUnlocked ? 'unlocked' : 'locked'}">
                        <div class="achievement-icon">${isUnlocked ? ach.name.split(' ')[0] : 'ğŸ”’'}</div>
                        <h3>${isUnlocked ? ach.name : 'Locked'}</h3>
                        <p>${ach.description}</p>
                        ${isUnlocked ? '<span class="unlocked-badge">âœ“ Unlocked</span>' : ''}
                    </div>
                `;
            }).join('');
            
            document.getElementById('achievementCount').textContent = `${unlocked.length} / ${achievementsList.length} Achievements Unlocked`;
            document.getElementById('achievementProgress').style.width = `${(unlocked.length / achievementsList.length) * 100}%`;
        }

        function unlockAchievement(id) {
            const unlocked = JSON.parse(localStorage.getItem(STORAGE_KEYS.achievements) || '[]');
            if (!unlocked.includes(id)) {
                unlocked.push(id);
                localStorage.setItem(STORAGE_KEYS.achievements, JSON.stringify(unlocked));
                showToast(`Achievement Unlocked! ğŸ† ${achievementsList.find(a => a.id === id)?.name}`);
                loadAchievements();
            }
        }

        function checkMoodAchievements() {
            const moodHistory = JSON.parse(localStorage.getItem(STORAGE_KEYS.moodHistory) || '[]');
            if (moodHistory.length >= 10) {
                unlockAchievement('mood_tracker');
            }
        }

        // ==================== VAULT FUNCTIONS ====================
        function unlockVault() {
            const pin = prompt('Enter vault PIN:');
            if (pin === APP_STATE.pin) {
                APP_STATE.vaultUnlocked = true;
                document.getElementById('vaultLocked').style.display = 'none';
                document.getElementById('vaultUnlocked').style.display = 'block';
                showToast('Vault unlocked! ğŸ”“');
            } else {
                showToast('Incorrect PIN');
            }
        }

        function lockVault() {
            APP_STATE.vaultUnlocked = false;
            document.getElementById('vaultLocked').style.display = 'block';
            document.getElementById('vaultUnlocked').style.display = 'none';
            showToast('Vault locked! ğŸ”’');
        }

        function showVaultTab(tab) {
            document.querySelectorAll('.vault-tab-content').forEach(t => t.style.display = 'none');
            document.querySelectorAll('.vault-tab').forEach(b => b.classList.remove('active'));
            
            document.getElementById('vault' + tab.charAt(0).toUpperCase() + tab.slice(1) + 'Tab').style.display = 'block';
            event.target.classList.add('active');
        }

        function saveVaultNote() {
            const note = document.getElementById('vaultNote').value;
            if (!note) return;
            
            const notes = JSON.parse(localStorage.getItem(STORAGE_KEYS.vaultNotes) || '[]');
            notes.unshift({
                text: note,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem(STORAGE_KEYS.vaultNotes, JSON.stringify(notes));
            showToast('Note saved! ğŸ”’');
            document.getElementById('vaultNote').value = '';
        }

        function saveConfession() {
            const confession = document.getElementById('confessionInput').value;
            if (!confession) return;
            
            const confessions = JSON.parse(localStorage.getItem(STORAGE_KEYS.vaultConfessions) || '[]');
            confessions.unshift({
                text: confession,
                timestamp: new Date().toISOString()
            });
            
            localStorage.setItem(STORAGE_KEYS.vaultConfessions, JSON.stringify(confessions));
            showToast('Confession saved! ğŸ’•');
            document.getElementById('confessionInput').value = '';
        }

        // ==================== SELF-CARE FUNCTIONS ====================
        const affirmations = [
            "You are beautiful",
            "You matter",
            "You are enough",
            "You are loved",
            "You are strong",
            "You are capable",
            "You are smart",
            "You are kind",
            "You are unique",
            "You are amazing"
        ];

        function newAffirmation() {
            const affirmation = affirmations[Math.floor(Math.random() * affirmations.length)];
            document.querySelector('.affirmation-display p').textContent = `"${affirmation}"`;
        }

        function showAffirmation(text) {
            document.querySelector('.affirmation-display p').textContent = `"${text}"`;
        }

        function newBeautyTip() {
            const tips = [
                "Stay hydrated for glowing skin! ğŸ’§",
                "Get 7-9 hours of sleep for radiant skin ğŸ˜´",
                "Eat fruits and vegetables for natural glow ğŸ",
                "Use sunscreen daily to protect your skin â˜€ï¸",
                "Take breaks from screens to rest your eyes ğŸ‘€"
            ];
            const tip = tips[Math.floor(Math.random() * tips.length)];
            document.querySelector('.beauty-tip p').textContent = tip;
        }

        const lifestyleChecks = { water: false, food: false, rest: false, faith: false };

        function toggleLifestyle(item) {
            lifestyleChecks[item] = !lifestyleChecks[item];
            document.getElementById(item + 'Check').textContent = lifestyleChecks[item] ? 'âœ“' : 'â—‹';
            
            // Save to localStorage
            localStorage.setItem(STORAGE_KEYS.lifestyle, JSON.stringify(lifestyleChecks));
        }

        // ==================== EMERGENCY FUNCTIONS ====================
        function emergencyComfort() {
            const messages = [
                "You are not alone. I'm here for you. ğŸ’™",
                "This feeling will pass. You are stronger than you know. âœ¨",
                "Take a deep breath. You've got this. ğŸŒ¸",
                "You are loved beyond measure. ğŸ’•",
                "It's okay to not be okay. I'm here. ğŸ¤—"
            ];
            
            document.getElementById('emergencyMessage').textContent = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('emergencyResponse').style.display = 'block';
        }

        function emergencyMusic() {
            showToast('Playing calming music... ğŸµ');
            showPage('music');
        }

        function emergencyPrayer() {
            document.getElementById('emergencyMessage').textContent = '"The Lord is my shepherd; I shall not want. He makes me lie down in green pastures..." - Psalm 23:1-2';
            document.getElementById('emergencyVerse').style.display = 'block';
            document.getElementById('emergencyResponse').style.display = 'block';
        }

        function openEmergencyChat() {
            showPage('chat');
            document.getElementById('chatInput').value = 'I need someone to talk to...';
        }

        function newEmergencyQuote() {
            const quotes = [
                "This too shall pass. You are stronger than you know.",
                "Every storm runs out of rain. Brighter days are coming.",
                "You are loved beyond measure.",
                "Your feelings are valid. Take all the time you need.",
                "I believe in you, always."
            ];
            document.getElementById('emergencyQuote').textContent = `"${quotes[Math.floor(Math.random() * quotes.length)]}"`;
        }

        // ==================== MORNING/NIGHT FUNCTIONS ====================
        function showTimePeriod(period) {
            APP_STATE.currentTimePeriod = period;
            
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('morningContent').style.display = period === 'morning' ? 'block' : 'none';
            document.getElementById('nightContent').style.display = period === 'night' ? 'block' : 'none';
        }

        function saveGratitude() {
            const gratitude = document.getElementById('gratitudeInput').value;
            if (gratitude) {
                showToast('Gratitude saved! ğŸ’•');
                document.getElementById('gratitudeInput').value = '';
            }
        }

        function triggerSurprise() {
            const surprises = [
                { emoji: 'ğŸ’Œ', message: 'A love note: "You are my sunshine on cloudy days! â˜€ï¸â¤ï¸"' },
                { emoji: 'ğŸ“¸', message: 'A memory photo: Our first meeting ğŸ’‘' },
                { emoji: 'ğŸŒ¸', message: 'A beautiful thought: You make the world brighter just by being in it! âœ¨' },
                { emoji: 'âœï¸', message: 'Bible verse: "I have loved you with an everlasting love..." - Jeremiah 31:3' },
                { emoji: 'ğŸ’•', message: 'I love you more than words can express! â¤ï¸' }
            ];
            
            const surprise = surprises[Math.floor(Math.random() * surprises.length)];
            document.getElementById('surpriseContent').innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 3rem;">${surprise.emoji}</div>
                    <p>${surprise.message}</p>
                </div>
            `;
        }

        // ==================== BIBLE FUNCTIONS ====================
        function newDailyVerse() {
            const verses = [
                { text: '"For God so loved the world that he gave his one and only Son..."', ref: '- John 3:16' },
                { text: '"Love is patient, love is kind..."', ref: '- 1 Corinthians 13:4-7' },
                { text: '"The Lord bless you and keep you..."', ref: '- Numbers 6:24-25' },
                { text: '"I have loved you with an everlasting love..."', ref: '- Jeremiah 31:3' },
                { text: '"Place me like a seal over your heart..."', ref: '- Song of Solomon 8:6' }
            ];
            
            const verse = verses[Math.floor(Math.random() * verses.length)];
            document.getElementById('dailyBibleVerse').textContent = verse.text;
            document.getElementById('dailyBibleRef').textContent = verse.ref;
        }

        function showVerse(reference) {
            showToast(`Showing ${reference} âœï¸`);
        }

        function newFaithEncouragement() {
            const encouragements = [
                '"Trust in the Lord with all your heart..." - Proverbs 3:5',
                '"The Lord is near to the brokenhearted..." - Psalm 34:18',
                '"I can do all things through Christ..." - Philippians 4:13',
                '"Be strong and courageous..." - Deuteronomy 31:6'
            ];
            document.getElementById('faithEncouragement').textContent = encouragements[Math.floor(Math.random() * encouragements.length)];
        }

        // ==================== STATS FUNCTIONS ====================
        function updateStats() {
            const startDate = localStorage.getItem(STORAGE_KEYS.startDate);
            if (startDate) {
                const days = Math.floor((new Date() - new Date(startDate)) / (1000 * 60 * 60 * 24));
                document.getElementById('daysTogether').textContent = days;
            }
            
            const memories = JSON.parse(localStorage.getItem(STORAGE_KEYS.memories) || '[]');
            document.getElementById('memoriesCount').textContent = memories.length;
            
            const conversations = JSON.parse(localStorage.getItem(STORAGE_KEYS.conversations) || '[]');
            document.getElementById('messagesExchanged').textContent = conversations.length;
            
            // Calculate streak
            const streak = calculateStreak();
            document.getElementById('streakDays').textContent = streak;
        }

        function calculateStreak() {
            // Simple streak calculation based on login
            const today = new Date().toDateString();
            const lastLogin = localStorage.getItem('yevonne_last_login');
            
            if (lastLogin !== today) {
                localStorage.setItem('yevonne_last_login', today);
            }
            
            // For now, return 0 - implement proper streak logic
            return 0;
        }

        // ==================== MUSIC PLAYER ====================
        function toggleMusic() {
            APP_STATE.musicPlaying = !APP_STATE.musicPlaying;
            showToast(APP_STATE.musicPlaying ? 'Music playing... ğŸµ' : 'Music paused');
        }

        function closeMusic() {
            document.getElementById('musicPlayer').style.display = 'none';
        }

        // ==================== UTILITY FUNCTIONS ====================
        function formatDate(timestamp) {
            return new Date(timestamp).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        // Make functions globally available
        window.showPage = showPage;
        window.sendMessage = sendMessage;
        window.quickReply = quickReply;
        window.selectMood = selectMood;
        window.saveMemory = saveMemory;
        window.cancelAddMemory = cancelAddMemory;
        window.viewMemory = viewMemory;
        window.viewMemoryTimeline = viewMemoryTimeline;
        window.addWish = addWish;
        window.loadWishes = loadWishes;
        window.filterWishes = filterWishes;
        window.toggleWishStatus = toggleWishStatus;
        window.deleteWish = deleteWish;
        window.showPrayerTab = showPrayerTab;
        window.savePrayer = savePrayer;
        window.saveGratitudeEntry = saveGratitudeEntry;
        window.saveReflection = saveReflection;
        window.loadTimeline = loadTimeline;
        window.unlockAchievement = unlockAchievement;
        window.unlockVault = unlockVault;
        window.lockVault = lockVault;
        window.showVaultTab = showVaultTab;
        window.saveVaultNote = saveVaultNote;
        window.saveConfession = saveConfession;
        window.newAffirmation = newAffirmation;
        window.showAffirmation = showAffirmation;
        window.newBeautyTip = newBeautyTip;
        window.toggleLifestyle = toggleLifestyle;
        window.emergencyComfort = emergencyComfort;
        window.emergencyMusic = emergencyMusic;
        window.emergencyPrayer = emergencyPrayer;
        window.openEmergencyChat = openEmergencyChat;
        window.newEmergencyQuote = newEmergencyQuote;
        window.showTimePeriod = showTimePeriod;
        window.saveGratitude = saveGratitude;
        window.triggerSurprise = triggerSurprise;
        window.newDailyVerse = newDailyVerse;
        window.showVerse = showVerse;
        window.newFaithEncouragement = newFaithEncouragement;
        window.playMoodMusic = playMoodMusic;
        window.verifyPIN = verifyPIN;
        window.biometricLogin = biometricLogin;
        window.installPWA = installPWA;
        window.dismissPWA = dismissPWA;
        window.toggleMobileMenu = toggleMobileMenu;
        window.toggleMusic = toggleMusic;
        window.closeMusic = closeMusic;
    </script>
</body>
</html>
